# 状态管理模块

## 目的
集中管理棋盘状态、对战模式、回合、胜负与重开逻辑。

## 模块概述
- **职责:** 保存游戏状态、对战模式、提供落子/重置与人机回合动作
- **状态:** 🚧开发中
- **最后更新:** 2026-01-19

## 规范

### 需求: 状态初始化
**模块:** state-store
初始化 15×15 空棋盘与默认回合（黑子先），默认模式为人机对战。\n+实现位置: `src/stores/game.js`

#### 场景: 进入游戏
前置条件: 页面加载完成
- 棋盘为空
- 当前回合为黑子

### 需求: 重新开始
**模块:** state-store
清空棋盘并重置胜负与回合。

#### 场景: 点击重新开始
前置条件: 用户点击“重新开始”
- 棋盘重置为空
- 胜负状态清空
- 回合回到黑子

### 需求: 对战模式与人机回合
**模块:** state-store
支持人机对战/双人对战切换，并在玩家落子后触发 AI 落子。\n+实现位置: `src/stores/game.js`

#### 场景: 切换对战模式
前置条件: 用户切换对战模式
- 对局立即重置
- 默认黑子先手

#### 场景: 玩家落子后AI回应
前置条件: 当前模式为人机、玩家落子成功且未分胜负
- AI 在 500ms 内完成落子
- 回合切换回玩家

### 需求: 平局判定
**模块:** state-store
当棋盘已满且无胜者时判定平局。\n+实现位置: `src/stores/game.js`

#### 场景: 棋盘落满
前置条件: 无胜者且棋盘已满
- 对局结果设为平局
- UI 根据状态显示平局

## API接口
无

## 数据模型
无

## 依赖
- game-core
- ai-engine

## 变更历史
- [202601191531_gomoku_duel](../../history/2026-01/202601191531_gomoku_duel/) - Pinia 对局状态管理
- [202601191626_gomoku_ai](../../history/2026-01/202601191626_gomoku_ai/) - 新增对战模式与平局逻辑
